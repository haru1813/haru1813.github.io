import{o as h,c as m,b as u,t as b,u as w,F as C,r as L,f as k,l as B,a as H,j as R,e as j,m as F}from"./index-B_Lp2sSn.js";import{f as V,r as I,p as M,c as N}from"./helpers-ClKiheRm.js";function f(n){return String(n).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function q(n){const e=[];let c=!1,s="",d=[],l=!1,t=[];const a=()=>{l&&(e.push("</ul>"),l=!1)},_=()=>{if(t.length===0)return;const p=i=>i.split("|").slice(1,-1).map(y=>y.trim()),o=i=>/^\|[\s\-:|]+\|$/.test(i.trim()),$=t.findIndex(o),g=$>=0?t.slice(0,$):t.slice(0,1),v=$>=0?t.slice($+1):t.slice(1);let r="<table><thead><tr>";for(const i of p(g[0]||""))r+=`<th>${f(i)}</th>`;r+="</tr></thead><tbody>";for(const i of v){const y=p(i);if(y.some(Boolean)){r+="<tr>";for(const T of y){const x=f(T).replace(/`([^`]+)`/g,"<code>$1</code>");r+=`<td>${x}</td>`}r+="</tr>"}}r+="</tbody></table>",e.push(r),t=[]},A=()=>{if(!c)return;const p=f(d.join(`
`));e.push(`<pre><code${s?` data-lang="${f(s)}"`:""}>${p}</code></pre>`),c=!1,s="",d=[]},S=p=>/^\s*\|.+\|\s*$/.test(p);for(const p of n||[]){const o=String(p??""),$=o.match(/^```(\w+)?\s*$/);if($){c?A():(a(),_(),c=!0,s=$[1]||"");continue}if(c){d.push(o);continue}const g=o.match(/^##\s+(.*)$/);if(g){a(),_(),e.push(`<h2>${f(g[1])}</h2>`);continue}const v=o.match(/^###\s+(.*)$/);if(v){a(),_(),e.push(`<h3>${f(v[1])}</h3>`);continue}if(/^---\s*$/.test(o)){a(),_(),e.push("<hr />");continue}if(S(o)){a(),t.push(o);continue}t.length>0&&_();const r=o.match(/^\-\s+(.*)$/);if(r){l||(e.push("<ul>"),l=!0),e.push(`<li>${f(r[1])}</li>`);continue}if(o.trim()===""){a(),_();continue}a();const i=f(o).replace(/`([^`]+)`/g,"<code>$1</code>");e.push(`<p>${i}</p>`)}return a(),_(),A(),e.join(`
`)}const D={class:"article-head"},O={class:"article-meta"},E={class:"muted small"},P={class:"muted small"},z={class:"tag-row"},G={__name:"ArticleHeader",props:{post:{type:Object,required:!0}},setup(n){return(e,c)=>(h(),m("header",D,[u("h1",null,b(n.post.title||"제목 없음"),1),u("div",O,[u("span",E,b(w(V)(n.post.date||"")),1),u("span",P,"· 읽기 "+b(w(I)(n.post.content)),1)]),u("div",z,[(h(!0),m(C,null,L(n.post.tags||[],s=>(h(),m("span",{key:s,class:"tag"},"#"+b(s),1))),128))])]))}},J=["innerHTML"],K={__name:"ArticleBody",props:{content:{type:Array,default:()=>[]}},setup(n){const e=n,c=k(()=>q(e.content||[]));return(s,d)=>(h(),m("div",{class:"article-body prose",innerHTML:c.value},null,8,J))}},Q={class:"container"},U={class:"breadcrumbs"},W=["href"],X={key:0,class:"article"},Y={key:1,class:"empty"},Z={key:2,class:"article-footer"},st={__name:"PostView",setup(n){const e=j(),c=F(),s=k(()=>M.find(l=>String(l.id)===String(e.params.id))),d=k(()=>{const l=s.value?.category;return l?"/category/"+N(l):"/"});return(l,t)=>(h(),m("div",Q,[u("div",U,[u("a",{href:d.value,class:"muted small",onClick:t[0]||(t[0]=B(a=>w(c).push(d.value),["prevent"]))},"← 글 목록으로",8,W)]),s.value?(h(),m("article",X,[H(G,{post:s.value},null,8,["post"]),H(K,{content:s.value.content},null,8,["content"])])):(h(),m("div",Y,[...t[2]||(t[2]=[u("p",null,"글을 찾을 수 없어요.",-1)])])),s.value?(h(),m("div",Z,[u("a",{class:"btn secondary",href:"#",onClick:t[1]||(t[1]=B(a=>w(c).push(d.value),["prevent"]))},"목록")])):R("",!0)]))}};export{st as default};
