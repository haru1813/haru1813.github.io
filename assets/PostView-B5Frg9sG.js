import{g as L,o as R,a as _,c as g,d as c,m as B,t as k,i as S,F as A,e as j,l as x,h as T,r as F,u as M,p as I}from"./index-DQAqRTq9.js";import{f as V,r as D,c as N}from"./helpers-DvH5YD8W.js";function h($){return String($).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;")}function P($){const t=[];let u=!1,d="",s=[],m=!1,o=[];const a=()=>{m&&(t.push("</ul>"),m=!1)},e=()=>{if(o.length===0)return;const p=r=>r.split("|").slice(1,-1).map(w=>w.trim()),n=r=>/^\|[\s\-:|]+\|$/.test(r.trim()),f=o.findIndex(n),y=f>=0?o.slice(0,f):o.slice(0,1),b=f>=0?o.slice(f+1):o.slice(1);let i="<table><thead><tr>";for(const r of p(y[0]||""))i+=`<th>${h(r)}</th>`;i+="</tr></thead><tbody>";for(const r of b){const w=p(r);if(w.some(Boolean)){i+="<tr>";for(const C of w){const H=h(C).replace(/`([^`]+)`/g,"<code>$1</code>");i+=`<td>${H}</td>`}i+="</tr>"}}i+="</tbody></table>",t.push(i),o=[]},l=()=>{if(!u)return;const p=h(s.join(`
`));t.push(`<pre><code${d?` data-lang="${h(d)}"`:""}>${p}</code></pre>`),u=!1,d="",s=[]},v=p=>/^\s*\|.+\|\s*$/.test(p);for(const p of $||[]){const n=String(p??""),f=n.match(/^```(\w+)?\s*$/);if(f){u?l():(a(),e(),u=!0,d=f[1]||"");continue}if(u){s.push(n);continue}const y=n.match(/^##\s+(.*)$/);if(y){a(),e(),t.push(`<h2>${h(y[1])}</h2>`);continue}const b=n.match(/^###\s+(.*)$/);if(b){a(),e(),t.push(`<h3>${h(b[1])}</h3>`);continue}if(/^---\s*$/.test(n)){a(),e(),t.push("<hr />");continue}if(v(n)){a(),o.push(n);continue}o.length>0&&e();const i=n.match(/^\-\s+(.*)$/);if(i){m||(t.push("<ul>"),m=!0),t.push(`<li>${h(i[1])}</li>`);continue}if(n.trim()===""){a(),e();continue}a();const r=h(n).replace(/`([^`]+)`/g,"<code>$1</code>");t.push(`<p>${r}</p>`)}return a(),e(),l(),t.join(`
`)}const q={class:"container"},E={class:"breadcrumbs"},O=["href"],z={key:0,class:"article"},G={class:"article-head"},J={class:"article-meta"},K={class:"muted small"},Q={class:"muted small"},U={class:"tag-row"},W=["innerHTML"],X={key:1,class:"empty"},Y={key:2,class:"article-footer"},te={__name:"PostView",setup($){const t=M(),u=I(),d=F([]),s=T(()=>d.value.find(e=>String(e.id)===String(t.params.id))),m=T(()=>s.value?P(s.value.content||[]):""),o=T(()=>{const e=s.value?.category;return e?"/category/"+N(e):"/"});async function a(){try{const l=await(await fetch("/posts/posts.json")).json();d.value=l.posts||[]}catch{d.value=[]}}return L(()=>t.params.id,a,{immediate:!0}),R(a),(e,l)=>(_(),g("div",q,[c("div",E,[c("a",{href:o.value,class:"muted small",onClick:l[0]||(l[0]=B(v=>S(u).push(o.value),["prevent"]))},"← 글 목록으로",8,O)]),s.value?(_(),g("article",z,[c("header",G,[c("h1",null,k(s.value.title||"제목 없음"),1),c("div",J,[c("span",K,k(S(V)(s.value.date||"")),1),c("span",Q,"· 읽기 "+k(S(D)(s.value.content)),1)]),c("div",U,[(_(!0),g(A,null,j(s.value.tags||[],v=>(_(),g("span",{key:v,class:"tag"},"#"+k(v),1))),128))])]),c("div",{class:"article-body prose",innerHTML:m.value},null,8,W)])):(_(),g("div",X,[...l[2]||(l[2]=[c("p",null,"글을 찾을 수 없어요.",-1)])])),s.value?(_(),g("div",Y,[c("a",{class:"btn secondary",href:"#",onClick:l[1]||(l[1]=B(v=>S(u).push(o.value),["prevent"]))},"목록")])):x("",!0)]))}};export{te as default};
